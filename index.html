<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quantum AI - Minimalist</title>
    
    <script src="https://js.puter.com/v2/"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --accent: #10b981;
            --bg: #050505;
            --surface: rgba(20, 20, 20, 0.6);
            --border: rgba(16, 185, 129, 0.15);
        }

        body { 
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: #e5e7eb;
            height: 100dvh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Arka plan: Çok hafif, yavaşça hareket eden dumanlı bir yeşil ışık */
        body::before {
            content: "";
            position: absolute;
            width: 150%; height: 150%;
            background: radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
            animation: moveLight 15s ease-in-out infinite alternate;
            z-index: -1;
        }

        @keyframes moveLight {
            from { transform: translate(-10%, -10%); }
            to { transform: translate(10%, 10%); }
        }

        .app-container {
            width: 100%;
            max-width: 900px;
            height: 95dvh;
            background: var(--surface);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            scroll-behavior: smooth;
            mask-image: linear-gradient(to bottom, transparent, black 5%, black 95%, transparent);
        }

        /* Mesaj Baloncukları */
        .ai-bubble {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-left: 3px solid var(--accent);
            padding: 1.25rem;
            border-radius: 16px;
            transition: all 0.3s ease;
        }
        
        .ai-bubble:hover {
            background: rgba(16, 185, 129, 0.02);
            border-color: rgba(16, 185, 129, 0.2);
        }

        .user-bubble {
            background: linear-gradient(135deg, #065f46, #064e3b);
            padding: 1rem 1.25rem;
            border-radius: 18px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        /* Input Alanı */
        .input-wrapper {
            padding: 24px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid var(--border);
        }

        .cyber-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cyber-input:focus {
            border-color: var(--accent);
            background: rgba(16, 185, 129, 0.05);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
        }

        /* Animasyonlar */
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .msg-anim { animation: msgIn 0.5s cubic-bezier(0.1, 0.9, 0.2, 1) forwards; }
        @keyframes msgIn { from { opacity: 0; transform: translateY(15px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }

        /* Kod Blokları */
        pre {
            background: #0d0d0d !important;
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
        }

        /* Yazıyor... Göstergesi */
        .dot { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; display: inline-block; animation: dotPulse 1.5s infinite; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes dotPulse { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.3); } }

        /* Mobil Optimizasyon */
        @media (max-width: 640px) {
            .app-container { height: 100dvh; border-radius: 0; border: none; }
            .chat-area { padding: 20px; }
        }
    </style>
</head>
<body>

    <div class="app-container">
        <header class="p-5 flex justify-between items-center border-b border-white/5">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <div class="w-10 h-10 rounded-xl bg-emerald-500/20 border border-emerald-500/50 flex items-center justify-center font-bold text-emerald-400">Q</div>
                    <div class="absolute -bottom-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-[#050505] animate-pulse"></div>
                </div>
                <div>
                    <h1 class="font-semibold text-sm tracking-tight">Quantum AI</h1>
                    <p class="text-[10px] text-emerald-500/60 uppercase font-bold tracking-widest">Core v4.0</p>
                </div>
            </div>
            <button onclick="clearChat()" class="text-[11px] font-medium text-white/40 hover:text-white transition-all bg-white/5 px-4 py-2 rounded-full border border-white/5 hover:border-white/20">Geçmişi Sil</button>
        </header>

        <main id="chatWindow" class="chat-area flex flex-col gap-8"></main>

        <footer class="input-wrapper">
            <div class="max-w-3xl mx-auto flex gap-3">
                <input type="text" id="userInput" onkeypress="if(event.key==='Enter') handleSend()"
                       placeholder="Bir mesaj gönder..." 
                       class="cyber-input flex-1 px-5 py-4 rounded-2xl text-sm text-white focus:outline-none">
                <button onclick="handleSend()" class="bg-emerald-500 hover:bg-emerald-400 text-black p-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-emerald-500/20">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" /></svg>
                </button>
            </div>
        </footer>
    </div>

    <script>
        let chatHistory = [];
        marked.setOptions({
            highlight: function(code) { return hljs.highlightAuto(code).value; },
            breaks: true, gfm: true
        });

        const chatWindow = document.getElementById('chatWindow');
        const userInput = document.getElementById('userInput');

        window.onload = () => {
            appendMessage('ai', "Selam! Ben **Quantum AI**. \n\n*Not: Puter girişi gerekir.*");
        };

        async function handleSend() {
            const text = userInput.value.trim();
            if (!text) return;

            appendMessage('user', text);
            userInput.value = '';
            const loadingId = addLoadingIndicator();

            try {
                chatHistory.push({ role: 'user', content: text });
                const response = await puter.ai.chat(chatHistory);
                const aiText = response.toString();
                removeLoadingIndicator(loadingId);
                await typeOutMessage(aiText);
                chatHistory.push({ role: 'assistant', content: aiText });
            } catch (error) {
                removeLoadingIndicator(loadingId);
                appendMessage('ai', "Bir sorun oluştu. Lütfen bağlantını kontrol et.");
            }
        }

        async function typeOutMessage(text) {
            const wrapper = document.createElement('div');
            wrapper.className = 'flex justify-start msg-anim';
            const bubble = document.createElement('div');
            bubble.className = 'ai-bubble max-w-[90%] text-sm prose prose-invert leading-relaxed';
            wrapper.appendChild(bubble);
            chatWindow.appendChild(wrapper);

            wrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });

            const words = text.split(' ');
            let currentText = '';
            for (let i = 0; i < words.length; i++) {
                currentText += words[i] + ' ';
                bubble.innerHTML = marked.parse(currentText);
                if (i % 10 === 0) wrapper.querySelectorAll('pre code').forEach(b => hljs.highlightElement(b));
                await new Promise(r => setTimeout(r, 12));
            }
            wrapper.querySelectorAll('pre code').forEach(b => hljs.highlightElement(b));
        }

        function appendMessage(role, text) {
            const div = document.createElement('div');
            div.className = role === 'user' ? 'flex justify-end msg-anim' : 'flex justify-start msg-anim';
            const content = role === 'user' 
                ? `<div class="user-bubble text-white text-sm">${text}</div>`
                : `<div class="ai-bubble max-w-[90%] text-sm prose prose-invert">${marked.parse(text)}</div>`;
            div.innerHTML = content;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        function addLoadingIndicator() {
            const id = 'l-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = 'flex justify-start msg-anim';
            div.innerHTML = `<div class="ai-bubble flex gap-1.5"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>`;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            return id;
        }

        function removeLoadingIndicator(id) { document.getElementById(id)?.remove(); }
        function clearChat() { chatWindow.innerHTML = ''; chatHistory = []; }
    </script>
</body>
</html>
